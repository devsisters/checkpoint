# This file is autogenerated by `src/bin/crdgen.rs`
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    {{- include "checkpoint.labels" . | nindent 4 }}
  name: validatingrules.checkpoint.devsisters.com
spec:
  group: checkpoint.devsisters.com
  names:
    categories: []
    kind: ValidatingRule
    plural: validatingrules
    shortNames:
    - vr
    singular: validatingrule
  scope: Cluster
  versions:
  - additionalPrinterColumns: []
    name: v1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for ValidatingRuleSpec via `CustomResource`
        properties:
          spec:
            properties:
              code:
                description: Lua code to evaluate when validating request.
                type: string
              failurePolicy:
                description: |-
                  FailurePolicy for webhook configuration.

                  FailurePolicy defines how unrecognized errors from the admission endpoint are handled - allowed values are Ignore or Fail. Defaults to Fail.
                enum:
                - Fail
                - Ignore
                nullable: true
                type: string
              namespaceSelector:
                description: |-
                  NamespaceSelector for webhook configuration.

                  NamespaceSelector decides wheter to run the Rule on an object based on whether the namespace for that object matches the selector.
                nullable: true
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                    items:
                      description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies to.
                          type: string
                        operator:
                          description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                          type: string
                        values:
                          description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                          items:
                            type: string
                          type: array
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                    type: object
                type: object
              objectRules:
                description: |-
                  ObjectRules for Rules field in webhook configuration.

                  ObjectRules describes what operations on what resources/subresources the Rule cares about. Default to the empty LabelSelector, which matches everything.
                items:
                  description: RuleWithOperations is a tuple of Operations and Resources. It is recommended to make sure that all the tuple expansions are valid.
                  properties:
                    apiGroups:
                      description: APIGroups is the API groups the resources belong to. '*' is all groups. If '*' is present, the length of the slice must be one. Required.
                      items:
                        type: string
                      type: array
                    apiVersions:
                      description: APIVersions is the API versions the resources belong to. '*' is all versions. If '*' is present, the length of the slice must be one. Required.
                      items:
                        type: string
                      type: array
                    operations:
                      description: Operations is the operations the admission hook cares about - CREATE, UPDATE, DELETE, CONNECT or * for all of those operations and any future admission operations that are added. If '*' is present, the length of the slice must be one. Required.
                      items:
                        type: string
                      type: array
                    resources:
                      description: |-
                        Resources is a list of resources this rule applies to.

                        For example: 'pods' means pods. 'pods/log' means the log subresource of pods. '*' means all resources, but not subresources. 'pods/*' means all subresources of pods. '*/scale' means all scale subresources. '*/*' means all resources and their subresources.

                        If wildcard is present, the validation rule will ensure resources do not overlap with each other.

                        Depending on the enclosing object, subresources might not be allowed. Required.
                      items:
                        type: string
                      type: array
                    scope:
                      description: scope specifies the scope of this rule. Valid values are "Cluster", "Namespaced", and "*" "Cluster" means that only cluster-scoped resources will match this rule. Namespace API objects are cluster-scoped. "Namespaced" means that only namespaced resources will match this rule. "*" means that there are no scope restrictions. Subresources match the scope of their parent resource. Default is "*".
                      type: string
                  type: object
                nullable: true
                type: array
              objectSelector:
                description: |-
                  ObjectSelector for webhook configuration.

                  ObjectSelector decides whether to run the Rule based on if the object has matching labels. Default to the empty LabelSelector, which matches everything.
                nullable: true
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                    items:
                      description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies to.
                          type: string
                        operator:
                          description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                          type: string
                        values:
                          description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                          items:
                            type: string
                          type: array
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                    type: object
                type: object
              serviceAccount:
                description: |-
                  The name of ServiceAccount to use to run Lua code.

                  If you want to use `kube_get` or `kube_list` function in Lua code, you must provide ServiceAccount info with this field.
                nullable: true
                properties:
                  name:
                    type: string
                  namespace:
                    type: string
                required:
                - name
                - namespace
                type: object
              timeoutSeconds:
                description: |-
                  TimeoutSeconds for webhook configuration..

                  TimeoutSeconds specifies the timeout for this Rule. Default to 10 seconds.
                format: int32
                nullable: true
                type: integer
            required:
            - code
            type: object
          status:
            nullable: true
            type: object
        required:
        - spec
        title: ValidatingRule
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    {{- include "checkpoint.labels" . | nindent 4 }}
  name: mutatingrules.checkpoint.devsisters.com
spec:
  group: checkpoint.devsisters.com
  names:
    categories: []
    kind: MutatingRule
    plural: mutatingrules
    shortNames:
    - mr
    singular: mutatingrule
  scope: Cluster
  versions:
  - additionalPrinterColumns: []
    name: v1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for MutatingRuleSpec via `CustomResource`
        properties:
          spec:
            properties:
              code:
                description: Lua code to evaluate when validating request.
                type: string
              failurePolicy:
                description: |-
                  FailurePolicy for webhook configuration.

                  FailurePolicy defines how unrecognized errors from the admission endpoint are handled - allowed values are Ignore or Fail. Defaults to Fail.
                enum:
                - Fail
                - Ignore
                nullable: true
                type: string
              namespaceSelector:
                description: |-
                  NamespaceSelector for webhook configuration.

                  NamespaceSelector decides wheter to run the Rule on an object based on whether the namespace for that object matches the selector.
                nullable: true
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                    items:
                      description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies to.
                          type: string
                        operator:
                          description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                          type: string
                        values:
                          description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                          items:
                            type: string
                          type: array
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                    type: object
                type: object
              objectRules:
                description: |-
                  ObjectRules for Rules field in webhook configuration.

                  ObjectRules describes what operations on what resources/subresources the Rule cares about. Default to the empty LabelSelector, which matches everything.
                items:
                  description: RuleWithOperations is a tuple of Operations and Resources. It is recommended to make sure that all the tuple expansions are valid.
                  properties:
                    apiGroups:
                      description: APIGroups is the API groups the resources belong to. '*' is all groups. If '*' is present, the length of the slice must be one. Required.
                      items:
                        type: string
                      type: array
                    apiVersions:
                      description: APIVersions is the API versions the resources belong to. '*' is all versions. If '*' is present, the length of the slice must be one. Required.
                      items:
                        type: string
                      type: array
                    operations:
                      description: Operations is the operations the admission hook cares about - CREATE, UPDATE, DELETE, CONNECT or * for all of those operations and any future admission operations that are added. If '*' is present, the length of the slice must be one. Required.
                      items:
                        type: string
                      type: array
                    resources:
                      description: |-
                        Resources is a list of resources this rule applies to.

                        For example: 'pods' means pods. 'pods/log' means the log subresource of pods. '*' means all resources, but not subresources. 'pods/*' means all subresources of pods. '*/scale' means all scale subresources. '*/*' means all resources and their subresources.

                        If wildcard is present, the validation rule will ensure resources do not overlap with each other.

                        Depending on the enclosing object, subresources might not be allowed. Required.
                      items:
                        type: string
                      type: array
                    scope:
                      description: scope specifies the scope of this rule. Valid values are "Cluster", "Namespaced", and "*" "Cluster" means that only cluster-scoped resources will match this rule. Namespace API objects are cluster-scoped. "Namespaced" means that only namespaced resources will match this rule. "*" means that there are no scope restrictions. Subresources match the scope of their parent resource. Default is "*".
                      type: string
                  type: object
                nullable: true
                type: array
              objectSelector:
                description: |-
                  ObjectSelector for webhook configuration.

                  ObjectSelector decides whether to run the Rule based on if the object has matching labels. Default to the empty LabelSelector, which matches everything.
                nullable: true
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                    items:
                      description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies to.
                          type: string
                        operator:
                          description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                          type: string
                        values:
                          description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                          items:
                            type: string
                          type: array
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                    type: object
                type: object
              serviceAccount:
                description: |-
                  The name of ServiceAccount to use to run Lua code.

                  If you want to use `kube_get` or `kube_list` function in Lua code, you must provide ServiceAccount info with this field.
                nullable: true
                properties:
                  name:
                    type: string
                  namespace:
                    type: string
                required:
                - name
                - namespace
                type: object
              timeoutSeconds:
                description: |-
                  TimeoutSeconds for webhook configuration..

                  TimeoutSeconds specifies the timeout for this Rule. Default to 10 seconds.
                format: int32
                nullable: true
                type: integer
            required:
            - code
            type: object
          status:
            nullable: true
            type: object
        required:
        - spec
        title: MutatingRule
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
